<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World At War 2 - Core Generator & Rulebook</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background: #2b2b2b;
            min-height: 100vh;
            padding: 20px;
            background-image: radial-gradient(circle at 10% 20%, #3d3d3d 0%, #1a1a1a 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #3a3a3a;
            border-radius: 0;
            padding: 30px;
            box-shadow: 10px 10px 0 #0a0a0a;
            border: 2px solid #6b6b6b;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 15px;
        }

        .logo-container {
            flex: 0 0 auto;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: #2f2f2f;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #d4af37;
            text-align: center;
            padding: 5px;
        }

        .title-container {
            flex: 1;
            text-align: center;
        }

        h1 {
            color: #d4af37;
            font-size: 3em;
            text-shadow: 3px 3px 0 #5a3e1a;
            letter-spacing: 4px;
            font-weight: bold;
            font-family: 'Impact', 'Courier New', monospace;
            margin: 0;
        }

        .logo-placeholder {
            width: 80px;
            height: 80px;
            background: #2f2f2f;
            border: 2px solid #d4af37;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #d4af37;
            font-size: 10px;
            text-align: center;
        }

        h2 {
            color: #c0c0c0;
            margin: 20px 0 15px 0;
            font-size: 1.8em;
            border-left: 5px solid #d4af37;
            padding-left: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .player-card {
            background: #2f2f2f;
            border-radius: 0;
            padding: 20px;
            box-shadow: 8px 8px 0 #0f0f0f;
            border: 1px solid #6b6b6b;
            transition: transform 0.3s ease;
            position: relative;
        }

        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 12px 12px 0 #0f0f0f;
        }

        .player-card h3 {
            color: #d4af37;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-left: 5px solid #7a7a7a;
            padding-left: 10px;
            font-weight: bold;
        }

        .location-details {
            background: #3a3a3a;
            border-radius: 0;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid #5a5a5a;
        }

        .location-name {
            font-weight: bold;
            color: #f0f0f0;
            margin-bottom: 8px;
            font-size: 1.2em;
            text-transform: uppercase;
        }

        .index-badge {
            display: inline-block;
            background: #d4af37;
            color: #1a1a1a;
            padding: 3px 8px;
            border-radius: 0;
            font-size: 0.9em;
            margin-top: 8px;
            font-weight: bold;
            border: 1px solid #5a3e1a;
        }

        .button-container {
            text-align: center;
            margin: 30px 0;
        }

        .reroll-btn {
            background: #4a4a4a;
            color: #d4af37;
            border: 2px solid #d4af37;
            padding: 15px 50px;
            font-size: 1.3em;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 5px 5px 0 #1f1f1f;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-family: 'Courier New', monospace;
        }

        .reroll-btn:hover {
            background: #5a5a5a;
            color: #ffd966;
            border-color: #ffd966;
            transform: translateY(-2px);
            box-shadow: 7px 7px 0 #1f1f1f;
        }

        .reroll-btn:active {
            transform: translateY(2px);
            box-shadow: 2px 2px 0 #1f1f1f;
        }

        .status-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 0;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 1.1em;
            border: 2px solid;
        }

        .status-success {
            background: #2f4f2f;
            color: #adff2f;
            border-color: #adff2f;
        }

        .status-warning {
            background: #5a3e1a;
            color: #ffd700;
            border-color: #ffd700;
        }

        /* Slideshow Navigation */
        .slideshow-container {
            margin-top: 40px;
            background: #2f2f2f;
            border: 2px solid #6b6b6b;
            padding: 0;
            box-shadow: 8px 8px 0 #0f0f0f;
        }

        .slide-tabs {
            display: flex;
            flex-wrap: wrap;
            background: #1f1f1f;
            border-bottom: 2px solid #d4af37;
        }

        .slide-tab {
            padding: 15px 25px;
            background: #2a2a2a;
            color: #c0c0c0;
            cursor: pointer;
            border: none;
            border-right: 1px solid #4a4a4a;
            font-size: 1.1em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .slide-tab:hover {
            background: #3a3a3a;
            color: #d4af37;
        }

        .slide-tab.active {
            background: #d4af37;
            color: #1a1a1a;
            border-bottom: 3px solid #ffd700;
        }

        .slide-content {
            padding: 30px;
            background: #2f2f2f;
        }

        .slide-pane {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .slide-pane.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .rule-card {
            background: #3a3a3a;
            border: 1px solid #6b6b6b;
            padding: 20px;
            border-left: 5px solid #d4af37;
            margin-bottom: 20px;
        }

        .rule-card h4 {
            color: #d4af37;
            font-size: 1.5em;
            margin-bottom: 15px;
            border-bottom: 1px solid #6b6b6b;
            padding-bottom: 10px;
        }

        .rule-card p {
            color: #f0f0f0;
            margin: 10px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .rule-card ul, .rule-card ol {
            color: #c0c0c0;
            margin: 10px 0 10px 30px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .rule-card li {
            margin: 8px 0;
        }

        .attack-order {
            font-family: 'Courier New', monospace;
            background: #2f2f2f;
            padding: 15px;
            border: 1px solid #5a5a5a;
            color: #ffd700;
            font-size: 1.1em;
            line-height: 2;
        }

        .attack-order span {
            display: inline-block;
            margin-right: 10px;
            color: #c0c0c0;
        }

        .cost-table {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .cost-item {
            background: #2f2f2f;
            padding: 10px 15px;
            border: 1px solid #5a5a5a;
            color: #c0c0c0;
            font-size: 1em;
            display: flex;
            justify-content: space-between;
        }

        .cost-item strong {
            color: #d4af37;
        }

        .unit-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .unit-card {
            background: #2f2f2f;
            border: 1px solid #5a5a5a;
            padding: 15px;
        }

        .unit-name {
            color: #d4af37;
            font-size: 1.2em;
            font-weight: bold;
            border-bottom: 1px solid #5a5a5a;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .unit-desc {
            color: #f0f0f0;
            margin: 5px 0;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            color: #d4af37;
            font-size: 0.9em;
            font-weight: bold;
            letter-spacing: 1px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .slide-tabs {
                flex-direction: column;
            }
            
            .slide-tab {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #4a4a4a;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <!-- Logo1.png -->
                <img src="Logo1.png" alt="World At War 2 Logo" style="width: 80px; height: 80px; border: 2px solid #d4af37;" onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-placeholder" style="display: none; width: 80px; height: 80px; background: #2f2f2f; border: 2px solid #d4af37; align-items: center; justify-content: center; color: #d4af37; font-size: 10px; text-align: center;">
                    LOGO<br>NOT<br>FOUND
                </div>
            </div>
            <div class="title-container">
                <h1>‚öîÔ∏è WORLD AT WAR 2 ‚öîÔ∏è</h1>
            </div>
            <div style="width: 80px;"></div> <!-- Spacer for balance -->
        </div>
        
        <div class="button-container">
            <button class="reroll-btn" onclick="generateNewLocations()">
                üîÑ REROLL CORES
            </button>
        </div>

        <div id="statusMessage" class="status-badge status-success" style="display: none;"></div>

        <h2>üéØ CORE NATIONS</h2>
        <div class="players-grid" id="playersGrid">
            <!-- Player cards will be inserted here by JavaScript -->
        </div>

        <!-- Slideshow Navigation -->
        <div class="slideshow-container">
            <div class="slide-tabs">
                <button class="slide-tab active" onclick="showSlide(0)">üìñ PAGE 1: GAMEPLAY</button>
                <button class="slide-tab" onclick="showSlide(1)">‚öîÔ∏è PAGE 2: ATTACK</button>
                <button class="slide-tab" onclick="showSlide(2)">üõ°Ô∏è PAGE 3: DEFENCE</button>
                <button class="slide-tab" onclick="showSlide(3)">üö∂ PAGE 4: MANOEUVRING</button>
                <button class="slide-tab" onclick="showSlide(4)">üí∞ PAGE 5: INCOME</button>
                <button class="slide-tab" onclick="showSlide(5)">üíÇ PAGE 6: INFANTRY</button>
                <button class="slide-tab" onclick="showSlide(6)">‚úàÔ∏è PAGE 7: AIR UNITS</button>
                <button class="slide-tab" onclick="showSlide(7)">üåä PAGE 8: SEA UNITS</button>
                <button class="slide-tab" onclick="showSlide(8)">üí™ PAGE 9: UNIT COSTS</button>
            </div>

            <div class="slide-content">
                <!-- Page 1: Gameplay -->
                <div class="slide-pane active" id="slide0">
                    <div class="rule-card">
                        <h4>üìñ GAMEPLAY RULES</h4>
                        <ol>
                            <li>Each player is randomly assigned a country, which becomes their Core territory.</li>
                            <li>All players expand simultaneously until every territory is occupied, with the exception of the Falklands.</li>
                            <li>Once expansion is complete, the round-based gameplay begins.</li>
                            <li>Each round consists of two phases: an Attack phase followed by a Maneuvering phase, where troops can be purchased.</li>
                            <li>The game continues until either all Core territories are conquered, or the game reaches a draw. The winner is the player with the highest income, not the most money.</li>
                        </ol>
                    </div>
                </div>

                <!-- Page 2: Attack -->
                <div class="slide-pane" id="slide1">
                    <div class="rule-card">
                        <h4>‚öîÔ∏è ATTACK RULES</h4>
                        <p><strong>Attack Origins:</strong> Attacks can be launched from all adjacent territories.</p>
                        <p><strong>Troop Commitment:</strong> You may commit as many troops as you desire to an attack.</p>
                        <p><strong>Attack Order of Resolution:</strong></p>
                        <div class="attack-order">
                            <span>1Ô∏è‚É£</span> Airplanes versus Airplanes<br>
                            <span>2Ô∏è‚É£</span> Airplanes versus Anti-air Guns<br>
                            <span>3Ô∏è‚É£</span> Air units versus Bunkers<br>
                            <span>4Ô∏è‚É£</span> Air units versus Ground Troops<br>
                            <span>5Ô∏è‚É£</span> Bunkers versus Ground Troops<br>
                            <span>6Ô∏è‚É£</span> Ground Troops versus Ground Troops
                        </div>
                    </div>
                </div>

                <!-- Page 3: Defence -->
                <div class="slide-pane" id="slide2">
                    <div class="rule-card">
                        <h4>üõ°Ô∏è DEFENCE RULES</h4>
                        <ul>
                            <li><strong>Tank Movement:</strong> Tanks cannot cross territories protected by Anti-tank units.</li>
                            <li><strong>Bunker Priority:</strong> Bunkers must be attacked and destroyed before any other units in the territory can be engaged.</li>
                            <li><strong>Core Defence:</strong> Core territories can participate in their own defence.</li>
                            <li><strong>Air Support:</strong> Fighter planes from up to 3 adjacent territories can be called upon to defend against air attacks. These planes can either remain in the defending territory or return to their origin after the battle.</li>
                        </ul>
                    </div>
                </div>

                <!-- Page 4: Manoeuvring -->
                <div class="slide-pane" id="slide3">
                    <div class="rule-card">
                        <h4>üö∂ MANOEUVRING PHASE</h4>
                        <ul>
                            <li>During the manoeuvring phase, you may move any number of troops, but only to adjacent territories.</li>
                            <li>If multiple players are waiting for others to complete their moves, a dice roll will determine the order of movement.</li>
                            <li>No attacks can be initiated during this phase, although an attack declaration can be converted into a manoeuvre instead.</li>
                        </ul>
                    </div>
                </div>

                <!-- Page 5: Income -->
                <div class="slide-pane" id="slide4">
                    <div class="rule-card">
                        <h4>üí∞ INCOME SYSTEM</h4>
                        <ul>
                            <li><strong>Starting Capital:</strong> Each player begins with 5 coins.</li>
                            <li><strong>Base Income:</strong> Your income is calculated as the number of territories you control divided by 3.</li>
                            <li><strong>Oil Fields:</strong> If you control an oil-producing territory, you receive an additional 2 bits each turn.</li>
                            <li><strong>Minimum Income:</strong> The base minimum income is 2, regardless of territory count.</li>
                        </ul>
                    </div>
                </div>

                <!-- Page 6: Infantry & Ground Units -->
                <div class="slide-pane" id="slide5">
                    <div class="rule-card">
                        <h4>üíÇ INFANTRY & GROUND UNITS</h4>
                        
                        <div class="unit-stats">
                            <div class="unit-card">
                                <div class="unit-name">Infantry</div>
                                <div class="unit-desc">Basic ground troops. Standard combat unit.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Artillery</div>
                                <div class="unit-desc">Can fire once per turn from one territory away.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Field Gun</div>
                                <div class="unit-desc">Can fire once per turn from one territory away.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Tank</div>
                                <div class="unit-desc">Heavy armored unit with 5 lives. Cannot cross Anti-tank defenses.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Bunker</div>
                                <div class="unit-desc">Fortified defensive structure with 3 lives. Must be attacked first.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Anti-tank Gun</div>
                                <div class="unit-desc">Stops 1 tank per turn. Cannot be moved unless destroyed or captured.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Page 7: Air Units -->
                <div class="slide-pane" id="slide6">
                    <div class="rule-card">
                        <h4>‚úàÔ∏è AIR UNITS</h4>
                        
                        <div class="unit-stats">
                            <div class="unit-card">
                                <div class="unit-name">Fighter Plane</div>
                                <div class="unit-desc">Can move up to 5 territories. When fighting non-AA assets, a loss only forces the plane to return to base rather than being destroyed.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Bomber</div>
                                <div class="unit-desc">Has 5 lives. When attacking ground targets, rolls 2 dice with 3 attack rolls.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Transport Plane</div>
                                <div class="unit-desc">Can carry 5 troops. Acts like a fighter in combat.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Anti-air Gun</div>
                                <div class="unit-desc">Can engage both ground and air targets. Cannot be moved unless destroyed or captured.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Anti-air Truck</div>
                                <div class="unit-desc">Mobile anti-air unit that can engage both ground and air targets.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Page 8: Sea Units -->
                <div class="slide-pane" id="slide7">
                    <div class="rule-card">
                        <h4>üåä SEA UNITS</h4>
                        
                        <div class="unit-stats">
                            <div class="unit-card">
                                <div class="unit-name">Battleship</div>
                                <div class="unit-desc">10 lives. Can attack coastal, sea, and air targets. Moves 2 spots per turn.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Cruiser</div>
                                <div class="unit-desc">5 lives. Can attack coastal, sea, and air targets.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Submarine</div>
                                <div class="unit-desc">5 lives. Can attack coastal, sea, and air targets. Can skip one spot when moving.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Transport Ship</div>
                                <div class="unit-desc">Can carry 30 troops. Has 2 lives for defence.</div>
                            </div>
                            
                            <div class="unit-card">
                                <div class="unit-name">Aircraft Carrier</div>
                                <div class="unit-desc">Allows purchase of planes at half the normal cost.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Page 9: Unit Costs -->
                <div class="slide-pane" id="slide8">
                    <div class="rule-card">
                        <h4>üí™ UNIT COSTS</h4>
                        <div class="cost-table">
                            <div class="cost-item"><strong>Infantry:</strong> <span>1</span></div>
                            <div class="cost-item"><strong>Field Gun:</strong> <span>7</span></div>
                            <div class="cost-item"><strong>Artillery:</strong> <span>12</span></div>
                            <div class="cost-item"><strong>Fighter Plane:</strong> <span>8</span></div>
                            <div class="cost-item"><strong>Bomber:</strong> <span>40</span></div>
                            <div class="cost-item"><strong>Transport Plane:</strong> <span>12</span></div>
                            <div class="cost-item"><strong>Cruiser:</strong> <span>12</span></div>
                            <div class="cost-item"><strong>Battleship:</strong> <span>25</span></div>
                            <div class="cost-item"><strong>Transport Ship:</strong> <span>7</span></div>
                            <div class="cost-item"><strong>Submarine:</strong> <span>16</span></div>
                            <div class="cost-item"><strong>Anti Aircraft Truck:</strong> <span>10</span></div>
                            <div class="cost-item"><strong>Anti Air Gun:</strong> <span>5</span></div>
                            <div class="cost-item"><strong>Factory:</strong> <span>18</span></div>
                            <div class="cost-item"><strong>Bunker:</strong> <span>4</span></div>
                            <div class="cost-item"><strong>Anti Tank Gun:</strong> <span>4</span></div>
                            <div class="cost-item"><strong>Tank:</strong> <span>10</span></div>
                            <div class="cost-item"><strong>Aircraft Carrier:</strong> <span>40</span></div>
                            <div class="cost-item"><strong>Nuke:</strong> <span>100</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>‚öîÔ∏è WORLD AT WAR 2 - COMMAND YOUR CORE ‚öîÔ∏è</p>
    </div>

    <script>
        // Location data from your table
        const locations = [
            // TOP ISLES / ARCTIC
            {index: "001", name: "Canada.isles", x: 520, y: 1650},
            {index: "002", name: "N.isle", x: 900, y: 1750},
            {index: "003", name: "N.Greenland", x: 980, y: 1600},
            {index: "004", name: "S.Greenland", x: 1020, y: 1500},
            {index: "005", name: "Isle.Norway", x: 1200, y: 1550},
            {index: "006", name: "Russian Isles", x: 1650, y: 1550},
            
            // NORTH AMERICA
            {index: "007", name: "North-West territory", x: 300, y: 1550},
            {index: "008", name: "Alaska", x: 150, y: 1500},
            {index: "009", name: "Canada", x: 450, y: 1200},
            {index: "010", name: "Ontario", x: 650, y: 1350},
            {index: "011", name: "Quebec", x: 850, y: 1300},
            {index: "012", name: "Western US", x: 400, y: 950},
            {index: "013", name: "Central United States", x: 600, y: 1000},
            {index: "014", name: "Eastern US", x: 750, y: 1000},
            {index: "015", name: "Mexico", x: 600, y: 900},
            {index: "016", name: "Central-America", x: 650, y: 820},
            {index: "017", name: "W.Cuba", x: 720, y: 880},
            {index: "018", name: "E.Cuba", x: 780, y: 860},
            
            // SOUTH AMERICA
            {index: "019", name: "Venezuela", x: 620, y: 780},
            {index: "020", name: "Colombia", x: 700, y: 720},
            {index: "021", name: "Peru", x: 500, y: 600},
            {index: "022", name: "Brazil", x: 850, y: 600},
            {index: "023", name: "Chile", x: 650, y: 420},
            {index: "024", name: "Argentina", x: 750, y: 350},
            {index: "025", name: "W.Falklands", x: 850, y: 250},
            {index: "026", name: "E.Falklands", x: 900, y: 220},
            
            // EUROPE
            {index: "027", name: "Spain", x: 1100, y: 1100},
            {index: "028", name: "France", x: 1150, y: 1150},
            {index: "029", name: "Italy", x: 1250, y: 1100},
            {index: "030", name: "Western Europe", x: 1100, y: 1150},
            {index: "031", name: "Eastern Europe", x: 1300, y: 1100},
            {index: "032", name: "Sweden", x: 1150, y: 1400},
            {index: "033", name: "Finland", x: 1250, y: 1400},
            {index: "034", name: "Ukraine", x: 1350, y: 1150},
            {index: "035", name: "Turkey", x: 1400, y: 1000},
            
            // RUSSIA
            {index: "036", name: "N.Russia", x: 1400, y: 1250},
            {index: "037", name: "Central Russia", x: 1550, y: 1200},
            {index: "038", name: "Eastern Russia", x: 1700, y: 1250},
            {index: "039", name: "S.Russia", x: 1450, y: 1100},
            {index: "040", name: "Siberian Plains", x: 1800, y: 1400},
            {index: "041", name: "Urals", x: 1500, y: 1050},
            
            // AFRICA
            {index: "042", name: "Morocco", x: 1100, y: 950},
            {index: "043", name: "Algeria", x: 1050, y: 900},
            {index: "044", name: "Libya", x: 1200, y: 900},
            {index: "045", name: "Egypt", x: 1350, y: 850},
            {index: "046", name: "Sudan", x: 1350, y: 780},
            {index: "047", name: "S.Sudan", x: 1350, y: 720},
            {index: "048", name: "Nigeria", x: 1150, y: 700},
            {index: "049", name: "Mali", x: 1050, y: 720},
            {index: "050", name: "Liberia", x: 1100, y: 650},
            {index: "051", name: "Congo", x: 1250, y: 600},
            {index: "052", name: "W.Congo", x: 1200, y: 550},
            {index: "053", name: "E.Africa", x: 1400, y: 700},
            {index: "054", name: "Ethiopia", x: 1450, y: 650},
            {index: "055", name: "Somalia", x: 1500, y: 600},
            {index: "056", name: "Tanzania", x: 1400, y: 480},
            {index: "057", name: "Zimbabwe", x: 1350, y: 500},
            {index: "058", name: "Botswana", x: 1300, y: 450},
            {index: "059", name: "South Africa", x: 1250, y: 350},
            {index: "060", name: "N.Madagascar", x: 1600, y: 500},
            {index: "061", name: "S.Madagascar", x: 1550, y: 450},
            
            // MIDDLE EAST & ASIA
            {index: "062", name: "Syria", x: 1450, y: 1000},
            {index: "063", name: "Iran", x: 1550, y: 950},
            {index: "064", name: "Saudi Arabia", x: 1450, y: 900},
            {index: "065", name: "Yemen", x: 1450, y: 850},
            {index: "066", name: "Oman", x: 1550, y: 880},
            {index: "067", name: "Afghanistan", x: 1600, y: 1000},
            {index: "068", name: "India", x: 1550, y: 850},
            {index: "069", name: "Mongolia", x: 1600, y: 1050},
            {index: "070", name: "China", x: 1700, y: 950},
            {index: "071", name: "West-Manchuria", x: 1800, y: 1100},
            {index: "072", name: "East-Manchuria", x: 1850, y: 1050},
            
            // SOUTHEAST ASIA
            {index: "073", name: "SouthEast Asia", x: 1700, y: 850},
            {index: "074", name: "W.Indonesia", x: 1800, y: 700},
            {index: "075", name: "E.Indonesia", x: 1900, y: 650},
            {index: "076", name: "S.Indonesia", x: 1850, y: 600},
            
            // JAPAN
            {index: "077", name: "N.Japan", x: 1900, y: 950},
            {index: "078", name: "Central Japan", x: 1950, y: 900},
            {index: "079", name: "S.Japan", x: 1900, y: 850},
            
            // AUSTRALIA
            {index: "080", name: "W.Australia", x: 1750, y: 450},
            {index: "081", name: "E.Australia", x: 1900, y: 450},
            {index: "082", name: "S.Australia", x: 1850, y: 380},
            {index: "083", name: "Isle.Australia", x: 1800, y: 300}
        ];

        const MIN_DISTANCE = 600;
        const MAX_ATTEMPTS = 1000;

        function calculateDistance(loc1, loc2) {
            return Math.sqrt(Math.pow(loc1.x - loc2.x, 2) + Math.pow(loc1.y - loc2.y, 2));
        }

        function allDistancesAboveThreshold(selectedLocations) {
            for (let i = 0; i < selectedLocations.length; i++) {
                for (let j = i + 1; j < selectedLocations.length; j++) {
                    if (calculateDistance(selectedLocations[i], selectedLocations[j]) < MIN_DISTANCE) {
                        return false;
                    }
                }
            }
            return true;
        }

        function generateFarApartLocations() {
            let attempts = 0;
            
            while (attempts < MAX_ATTEMPTS) {
                // Randomly select 4 unique locations
                const shuffled = [...locations].sort(() => 0.5 - Math.random());
                const selected = shuffled.slice(0, 4);
                
                if (allDistancesAboveThreshold(selected)) {
                    return { success: true, locations: selected };
                }
                
                attempts++;
            }
            
            // Fallback: Use backtracking approach
            return findLocationsBacktracking();
        }

        function findLocationsBacktracking() {
            for (let attempt = 0; attempt < 100; attempt++) {
                const result = [locations[Math.floor(Math.random() * locations.length)]];
                
                while (result.length < 4) {
                    const candidate = locations[Math.floor(Math.random() * locations.length)];
                    
                    if (result.includes(candidate)) continue;
                    
                    let farEnough = true;
                    for (const loc of result) {
                        if (calculateDistance(candidate, loc) < MIN_DISTANCE) {
                            farEnough = false;
                            break;
                        }
                    }
                    
                    if (farEnough) {
                        result.push(candidate);
                    }
                    
                    // Prevent infinite loop
                    if (result.length < 4 && Math.random() < 0.01) break;
                }
                
                if (result.length === 4) {
                    return { success: true, locations: result };
                }
            }
            
            // If all else fails, return random locations
            const randomLocs = [...locations].sort(() => 0.5 - Math.random()).slice(0, 4);
            return { success: false, locations: randomLocs };
        }

        function displayLocations() {
            const result = generateFarApartLocations();
            const selected = result.locations;
            const success = result.success;
            
            // Update status message
            const statusDiv = document.getElementById('statusMessage');
            if (success) {
                statusDiv.style.display = 'block';
                statusDiv.className = 'status-badge status-success';
                statusDiv.textContent = '‚úÖ VALID CORES: All cores are at least 600 units apart';
            } else {
                statusDiv.style.display = 'block';
                statusDiv.className = 'status-badge status-warning';
                statusDiv.textContent = '‚ö†Ô∏è WARNING: Some cores are too close together - High tension border!';
            }
            
            // Display player cards
            const playersGrid = document.getElementById('playersGrid');
            playersGrid.innerHTML = '';
            
            const playerNames = ['CORE 1', 'CORE 2', 'CORE 3', 'CORE 4'];
            
            selected.forEach((loc, index) => {
                const playerCard = `
                    <div class="player-card">
                        <h3>‚öîÔ∏è ${playerNames[index]}</h3>
                        <div class="location-details">
                            <div class="location-name">üìç ${loc.name}</div>
                            <div class="index-badge">[${loc.index}]</div>
                        </div>
                    </div>
                `;
                playersGrid.innerHTML += playerCard;
            });
        }

        // Slide navigation function
        window.showSlide = function(index) {
            // Hide all slides
            for (let i = 0; i < 9; i++) {
                document.getElementById(`slide${i}`).classList.remove('active');
            }
            
            // Show selected slide
            document.getElementById(`slide${index}`).classList.add('active');
            
            // Update tab active states
            const tabs = document.querySelectorAll('.slide-tab');
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        };

        // Make function globally available
        window.generateNewLocations = displayLocations;

        // Initialize on page load
        window.onload = function() {
            displayLocations();
            // Ensure first slide is active
            showSlide(0);
        };
    </script>
</body>
</html>
